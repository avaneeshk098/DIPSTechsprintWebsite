{% load static %}
<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DPS IT COUNCIL</title>
    {% csrf_token %}
    <link rel="stylesheet" href="{% static 'hints.css' %}">
    <link rel="stylesheet" href="{% static 'style.css'%}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            document.addEventListener("contextmenu", function(e) {
                e.preventDefault();
            }, false);
            document.addEventListener("keydown", function(e) {
                //document.onkeydown = function(e) {
                // "I" key
                if (e.ctrlKey && e.shiftKey && e.keyCode == 73) {
                    disabledEvent(e);
                }
                // "J" key
                if (e.ctrlKey && e.shiftKey && e.keyCode == 74) {
                    disabledEvent(e);
                }
                // "S" key + macOS
                if (e.keyCode == 83 && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey)) {
                    disabledEvent(e);
                }
                // "U" key
                if (e.ctrlKey && e.keyCode == 85) {
                    disabledEvent(e);
                }
                // "F12" key
                if (event.keyCode == 123) {
                    disabledEvent(e);
                }
            }, false);

            function disabledEvent(e) {
                if (e.stopPropagation) {
                    e.stopPropagation();
                } else if (window.event) {
                    window.event.cancelBubble = true;
                }
                e.preventDefault();
                return false;
            }
            const csrftoken = Cookies.get('csrftoken');
            var prev = 0
            function get_hints(){
                $.ajax({
                    url: '/techsprint/treasurehunt_challenge/hints_post',
                    type: 'POST',
                    data: {
                        random: 'Hello, World'
                    },
                    headers: {'X-CSRFToken': csrftoken},
                    success: (result)=>{
                        if(prev != result.hints.length){
                            document.querySelector('#hint-section').innerHTML+=`<p>[${prev+1}] ${result.hints[prev]}</p>`
                            prev+=1;
                        }
                    },
                })
            }
            setInterval(get_hints, 60000);
        }
    </script>
</head>
<div class="container">
    <div class="navbar">
        <div class="menu">
            <a class="navbar-brand text-uppercase" href="/techsprint" style="font-family: Montserrat, sans-serif;color: rgb(255,255,255); text-decoration: none;"><strong>TECH</strong><span style="color: rgb(0,252,25);"><strong><em>SPRINT</em></strong></span></a>
            <div class="hamburger-menu" style="margin-right: 1rem;">
                <div class="bar"></div>
            </div>
        </div>
    </div>
    <div class="main-container">
        <div class="main">
            <header>
                <div class="overlay">
                    <div class="inner">
                        <div id="hint-section"><h2>Hints</h2></div>
                    </div>
                </div>
            </header>
        </div>
        <div class="shadow one"></div>
        <div class="shadow two"></div>
    </div>
    <div class="links">
        <ul>
            <li><a href="/techsprint/treasurehunt_challenge/home" style="--i: 0.1s;">Home</a></li>
            <li><a href="/techsprint/treasurehunt_challenge/challenge" style="--i: 0.05s;">Challenge</a></li>
            <li><a href="/techsprint/treasurehunt_challenge/acknowledgement" style="--i: 0.15s;">Acknowledgements</a></li>
        </ul>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="{% static 'app.js' %}"></script>