{% load static %}
<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DPS IT COUNCIL</title>
    {% csrf_token %}
    <link rel="stylesheet" href="{% static 'style.css'%}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
    <link rel="stylesheet" href="{% static 'ack.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            document.addEventListener("contextmenu", function(e) {
                e.preventDefault();
            }, false);
            document.addEventListener("keydown", function(e) {
                //document.onkeydown = function(e) {
                // "I" key
                if (e.ctrlKey && e.shiftKey && e.keyCode == 73) {
                    disabledEvent(e);
                }
                // "J" key
                if (e.ctrlKey && e.shiftKey && e.keyCode == 74) {
                    disabledEvent(e);
                }
                // "S" key + macOS
                if (e.keyCode == 83 && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey)) {
                    disabledEvent(e);
                }
                // "U" key
                if (e.ctrlKey && e.keyCode == 85) {
                    disabledEvent(e);
                }
                // "F12" key
                if (event.keyCode == 123) {
                    disabledEvent(e);
                }
            }, false);

            function disabledEvent(e) {
                if (e.stopPropagation) {
                    e.stopPropagation();
                } else if (window.event) {
                    window.event.cancelBubble = true;
                }
                e.preventDefault();
                return false;
            }

            const csrftoken = Cookies.get('csrftoken');
            var prev = 0;
            function get_hints(){
                $.ajax({
                    url: '/techsprint/treasurehuntrandomkey/image_hints',
                    type: 'POST',
                    data: {
                        random: 'Hello, World'
                    },
                    headers: {'X-CSRFToken': csrftoken},
                    success: (result)=>{
                        console.log(result)
                        if(prev != result.hints.length){
                            document.querySelector('#hint-section').innerHTML+=`<p>[${prev+1}] ${result.hints[prev]}</p>`
                            prev+=1;
                        }
                    },
                })
            }
            setInterval(get_hints, 60000)
        }
    </script>
</head>
<div class="container">
    <div class="navbar">
        <div class="menu" style="min-height: 4rem;">
            <a class="navbar-brand text-uppercase" href="/techsprint" style="font-family: Montserrat, sans-serif;color: rgb(255,255,255); text-decoration: none;"><strong>TECH</strong><span style="color: rgb(0,252,25);"><strong><em>SPRINT</em></strong></span></a>
        </div>
    </div>
    <div class="main-container">
        <div class="main">
            <header>
                <div class="overlay">
                    <div class="inner">
                        <p class="main-content"><a href="{% static 'error.png' %}" download="{% static 'error.png' %}"><button class="btn btn-indigo btn-lg" type="button" style="align-items: center">Download your first challenge file</button></a></p><br>
                        <div id="hint-section"><h2>Hints</h2></div>
                    </div>
                </div>
            </header>
        </div>
        <div class="shadow one"></div>
        <div class="shadow two"></div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="{% static 'app.js' %}"></script>